CodePipeLineRole:
  Type: AWS::IAM::Role
  Properties:
    AssumeRolePolicyDocument:
      Version: "2012-10-17"
      Statement:
        - 
          Effect: Allow
          Principal:
            Service:
              - "codepipeline.amazonaws.com"
          Action:
            - "sts:AssumeRole"
    Policies:
      - PolicyName: root
        PolicyDocument:
          Version: "2012-10-17"
          Statement: 
            - 
              Effect: Allow
              Action:
                - "s3:GetObject"
                - "s3:GetObjectVersion"
                - "s3:GetBucketVersioning"
                - "s3:PutObject"
              Resource: 
                - !GetAtt DeployBucket.Arn
                - !Join ['', [!GetAtt DeployBucket.Arn, "/*"]]
            - 
              Effect: Allow  
              Action:
                - "codebuild:BatchGetBuilds"
                - "codebuild:StartBuild"
              Resource: "*"